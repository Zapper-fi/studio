/* eslint no-console: 0 */
import fs, { writeFileSync } from 'fs';
import path from 'path';
import util from 'util';

const exists = util.promisify(fs.exists);

export const generateIndex = async (location: string) => {
  let content = `
  /* Autogenerated file. Do not edit manually. */
  /* tslint:disable */
  /* eslint-disable */
  `;

  if (await exists(path.join(location, `/contracts/ethers.contract-factory.ts`))) {
    content += `export * from './ethers.contract-factory';\n`;
  }

  if (await exists(path.join(location, `/contracts/viem.contract-factory.ts`))) {
    content += `export * from './viem.contract-factory';\n`;
  }

  writeFileSync(path.join(location, `/contracts/index.ts`), content);
};
